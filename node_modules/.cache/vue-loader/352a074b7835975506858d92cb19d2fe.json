{"remainingRequest":"/Volumes/DATI/GIT/Progetto-ModeSem/client_modsem/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/DATI/GIT/Progetto-ModeSem/client_modsem/src/components/Canzoni.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/DATI/GIT/Progetto-ModeSem/client_modsem/src/components/Canzoni.vue","mtime":1640032016117},{"path":"/Volumes/DATI/GIT/Progetto-ModeSem/client_modsem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATI/GIT/Progetto-ModeSem/client_modsem/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/DATI/GIT/Progetto-ModeSem/client_modsem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATI/GIT/Progetto-ModeSem/client_modsem/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7QkNvbnRhaW5lciwgQlJvdywgQkNvbH0gZnJvbSAiYm9vdHN0cmFwLXZ1ZSI7Cgpjb25zdCBTcGFycWxDbGllbnQgPSByZXF1aXJlKCdzcGFycWwtaHR0cC1jbGllbnQnKQpjb25zdCBlbmRwb2ludFVybCA9ICdodHRwOi8vbG9jYWxob3N0OjcyMDAvcmVwb3NpdG9yaWVzL01FTycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2Fuem9uaSIsCgogIGNvbXBvbmVudHM6IHsKICAgIC8vQkJ1dHRvbiwKICAgIEJDb250YWluZXIsIEJSb3csIEJDb2wKICB9LAoKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBldmVudFNlbGVjdGVkOiBudWxsLAogICAgICBhbGxFdmVudHM6IFtdLAogICAgICBhcnRpc3RzTG9hZGVkOiBmYWxzZSwKICAgICAgYWxsTG9hZGVkOiBmYWxzZSwKICAgICAgZXZlbnRzOiBbXSwKICAgICAgaW5zdHJ1bWVudHM6IFtdLAogICAgICBzdGF0dXM6ICdub3Rfc2VsZWN0ZWQnLAogICAgfQogIH0sCgogIGFzeW5jIG1vdW50ZWQoKSB7CgogICAgY29uc3QgcXVlcnkgPSBgCiAgICAgIFBSRUZJWCBtZW86IDxodHRwOi8vd3d3Lm1vZHNlbS5vcmcvbXVzaWNhbEV2ZW50c09udG9sb2d5Iz4KICAgICAgUFJFRklYIHJkZjogPGh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyM+CiAgICAgIFBSRUZJWCBvd2w6IDxodHRwOi8vd3d3LnczLm9yZy8yMDAyLzA3L293bCM+CiAgICAgIFBSRUZJWCByZGZzOiA8aHR0cDovL3d3dy53My5vcmcvMjAwMC8wMS9yZGYtc2NoZW1hIz4KICAgICAgUFJFRklYIHhzZDogPGh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIz4KCiAgICAgIHNlbGVjdCA/dGl0b2xvQ2Fuem9uZQogICAgICB3aGVyZSB7CiAgICAgICAgICA/Y2Fuem9uZSByZGY6dHlwZSBtZW86Q2Fuem9uZTsKICAgICAgICAgICAgICAgICAgbWVvOnRpdG9sb0NhbnpvbmUgP3RpdG9sb0NhbnpvbmUuCiAgICAgIH0gbGltaXQgMTAwCiAgICBgOwoKICAgIGNvbnN0IGNsaWVudCA9IG5ldyBTcGFycWxDbGllbnQoe2VuZHBvaW50VXJsfSkKICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IGNsaWVudC5xdWVyeS5zZWxlY3QocXVlcnkpCgogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIHN0cmVhbS5vbignZGF0YScsIHJvdyA9PiB7CiAgICAgIGNvbnNvbGUubG9nKHJvdyk7CiAgICAgIE9iamVjdC5lbnRyaWVzKHJvdykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7CgogICAgICAgIHZhciBhcnRpc3ROYW1lID0gdmFsdWUudmFsdWUucmVwbGFjZSgnaHR0cDovL3d3dy5tb2RzZW0ub3JnL211c2ljYWxFdmVudHNPbnRvbG9neSMnLCAnJyk7CgogICAgICAgIHNlbGYuYWxsRXZlbnRzLnB1c2goe3ZhbHVlOiBhcnRpc3ROYW1lLCB0ZXh0OiBhcnRpc3ROYW1lfSk7CgogICAgICAgIGNvbnNvbGUubG9nKGAke2tleX06ICR7dmFsdWUudmFsdWV9ICgke3ZhbHVlLnRlcm1UeXBlfSlgKQogICAgICB9KQoKICAgICAgc2VsZi5hcnRpc3RzTG9hZGVkID0gdHJ1ZTsKICAgIH0pCgogICAgc3RyZWFtLm9uKCdlcnJvcicsIGVyciA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKQogICAgfSkKICB9LAoKICBtZXRob2RzOiB7CiAgICBjYWxsUXVlcnlNZXRob2RzKHNvbmdOYW1lKSB7CiAgICAgIHRoaXMuZmluZEluc3RydW1lbnRzKHNvbmdOYW1lKTsKICAgICAgdGhpcy5maW5kTGl2ZUV2ZW50cyhzb25nTmFtZSk7CiAgICB9LAogICAgYXN5bmMgZmluZExpdmVFdmVudHMoc29uZ05hbWUpIHsKICAgICAgdGhpcy5ldmVudHMgPSBbXTsKCiAgICAgIHZhciBxdWVyeSA9ICIiOwoKICAgICAgLy9UdXR0aSBnbGkgZXZlbnRpIGluIGN1aSB1bmEgY2Fuem9uZSDDqCBpbiBzY2FsZXR0YQogICAgICAgIHF1ZXJ5ID0gYAogICAgICAgICAgUFJFRklYIG1lbzogPGh0dHA6Ly93d3cubW9kc2VtLm9yZy9tdXNpY2FsRXZlbnRzT250b2xvZ3kjPgogICAgICAgICAgUFJFRklYIHJkZjogPGh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyM+CiAgICAgICAgICBQUkVGSVggb3dsOiA8aHR0cDovL3d3dy53My5vcmcvMjAwMi8wNy9vd2wjPgogICAgICAgICAgUFJFRklYIHJkZnM6IDxodHRwOi8vd3d3LnczLm9yZy8yMDAwLzAxL3JkZi1zY2hlbWEjPgogICAgICAgICAgUFJFRklYIHhzZDogPGh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIz4KICAgICAgICAgIFBSRUZJWCBvd3A6IDxodHRwOi8vd3d3Lm9udG9sb2d5ZGVzaWducGF0dGVybnMub3JnL2NwL293bC9iYWcub3dsIz4KCgogICAgICAgICAgc2VsZWN0ID9ub21lRXZlbnRvCiAgICAgICAgICB3aGVyZSB7CiAgICAgICAgICAgICAgP2V2ZW50byAgcmRmOnR5cGUgbWVvOkV2ZW50b011c2ljYWxlOwogICAgICAgICAgICAgICAgICAgICAgIG1lbzpub21lRXZlbnRvTXVzaWNhbGUgP25vbWVFdmVudG87CiAgICAgICAgICAgICAgICAgICAgICAgbWVvOmhhU2NhbGV0dGEgP3NjYWxldHRhLgogICAgICAgICAgICAgID9zY2FsZXR0YSByZGY6dHlwZSBtZW86U2NhbGV0dGE7CiAgICAgICAgICAgICAgICAgICAgICAgIG93cDpoYXNJdGVtID9icmFuby4KICAgICAgICAgICAgICA/YnJhbm8gcmRmOnR5cGUgbWVvOkJyYW5vTXVzaWNhbGU7CiAgICAgICAgICAgICAgICAgICAgIG1lbzpjb250aWVuZUNhbnpvbmUgP2NhbnpvbmUuCiAgICAgICAgICAgICAgP2NhbnpvbmUgcmRmOnR5cGUgbWVvOkNhbnpvbmU7CiAgICAgICAgICAgICAgICAgICAgICAgbWVvOnRpdG9sb0NhbnpvbmUgP3RpdG9sb0NhbnpvbmUuCiAgICAgICAgICAgICAgRklMVEVSIHJlZ2V4KD90aXRvbG9DYW56b25lLCAiYCArIHNvbmdOYW1lICsgYCIpLgogICAgICAgICAgfSBsaW1pdCAxMDBgOwoKICAgICAgLy9Db3N0cnVpc2NvIGxhIHF1ZXJ5CgogICAgICAvL0NoaWFtbyBpbCBtZXRvZG8gY2hlIGVzZWd1ZSBsYSBxdWVyeTogc2l0dWF0byBuZWwgY29tcG9uZW50IHByaW5jaXBhbGUKICAgICAgdGhpcy5ldmVudHMgPSBhd2FpdCB0aGlzLiRyb290LiRyZWZzLkhlbGxvV29ybGQubWFrZVF1ZXJ5KHF1ZXJ5KTsKICAgICAgY29uc29sZS5sb2codGhpcy5ldmVudHMpOwogICAgfSwKICAgIGFzeW5jIGZpbmRJbnN0cnVtZW50cyhzb25nTmFtZSkgewogICAgICB0aGlzLmluc3RydW1lbnRzID0gW107CgogICAgICB2YXIgcXVlcnkgPSAiIjsKCiAgICAgIC8vVHV0dGkgZ2xpIGV2ZW50aSBpbiBjdWkgdW5hIGNhbnpvbmUgw6ggaW4gc2NhbGV0dGEKICAgICAgcXVlcnkgPSBgCiAgICAgICAgUFJFRklYIG1lbzogPGh0dHA6Ly93d3cubW9kc2VtLm9yZy9tdXNpY2FsRXZlbnRzT250b2xvZ3kjPgogICAgICAgIFBSRUZJWCByZGY6IDxodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjPgogICAgICAgIFBSRUZJWCBvd2w6IDxodHRwOi8vd3d3LnczLm9yZy8yMDAyLzA3L293bCM+CiAgICAgICAgUFJFRklYIHJkZnM6IDxodHRwOi8vd3d3LnczLm9yZy8yMDAwLzAxL3JkZi1zY2hlbWEjPgogICAgICAgIFBSRUZJWCB4c2Q6IDxodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSM+CiAgICAgICAgUFJFRklYIG93cDogPGh0dHA6Ly93d3cub250b2xvZ3lkZXNpZ25wYXR0ZXJucy5vcmcvY3Avb3dsL2JhZy5vd2wjPgoKICAgICAgICBzZWxlY3QgZGlzdGluY3QgP2NhbnpvbmUgP3N0cnVtZW50byA/bm9tZUFydGlzdGEKICAgICAgICB3aGVyZSB7CiAgICAgICAgICAgID9jYW56b25lIHJkZjp0eXBlIG1lbzpDYW56b25lOwogICAgICAgICAgICAgICAgICAgICBtZW86dGl0b2xvQ2Fuem9uZSA/dGl0b2xvQ2Fuem9uZTsKICAgICAgICAgICAgICAgIG1lbzpjYW56b25lU3VvbmF0YUNvblN0cnVtZW50byA/c3RydW1lbnRvLgogICAgICAgICAgICA/c3RydW1lbnRvIHJkZjp0eXBlIG1lbzpTdHJ1bWVudG9NdXNpY2FsZTsKICAgICAgICAgICAgICAgICAgICBtZW86w6hTdW9uYXRvRGEgP2FydGlzdGEuCiAgICAgICAgICAgID9hcnRpc3RhIG1lbzpub21lQWdlbnRlTXVzaWNhbGUgP25vbWVBcnRpc3RhLgogICAgICAgICAgICBGSUxURVIgcmVnZXgoP3RpdG9sb0NhbnpvbmUsICJgICsgc29uZ05hbWUgKyBgIikuCiAgICAgICAgfSBsaW1pdCAxMDBgOwoKICAgICAgLy9Db3N0cnVpc2NvIGxhIHF1ZXJ5CgogICAgICAvL0NoaWFtbyBpbCBtZXRvZG8gY2hlIGVzZWd1ZSBsYSBxdWVyeTogc2l0dWF0byBuZWwgY29tcG9uZW50IHByaW5jaXBhbGUKICAgICAgdGhpcy5pbnN0cnVtZW50cyA9IGF3YWl0IHRoaXMuJHJvb3QuJHJlZnMuSGVsbG9Xb3JsZC5tYWtlUXVlcnkocXVlcnkpOwogICAgfSwKICB9Cn0KCg=="},{"version":3,"sources":["Canzoni.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA","file":"Canzoni.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"m-3\">\n    <div v-if=\"artistsLoaded\">\n      <!--\n      <b-form-select v-model=\"eventSelected\" :options=\"allEvents\"></b-form-select>\n      <div class=\"mt-3\">Selected: <strong>{{ eventSelected }}</strong></div>\n      <div>\n        <b-button variant=\"primary\" @click=\"findLiveEvents()\">Trova eventi Live dell'artista</b-button>\n      </div>-->\n      <h3>Canzoni</h3>\n\n\n      <b-container class=\"bv-example-row\">\n        <b-row class=\"text-center\">\n          <b-col cols=\"3\">\n            <b-list-group>\n              <b-list-group-item v-for=\"(elem, index) in allEvents\" :key=\"index\" @click=\"callQueryMethods(elem.value)\" button>{{ elem.value }}</b-list-group-item>\n            </b-list-group>\n          </b-col>\n          <b-col cols=\"9\">\n            <h4>Eventi in cui la canzone era in scaletta</h4>\n            <div v-if=\"events.length > 0\">\n                <b-table striped hover :items=\"events\"></b-table>\n              </div>\n              <div v-else>\n                <h5>La canzone non è stata suonata in nessun evento</h5>\n              </div>\n            <h4>Strumenti con cui la canzone è stata suonata</h4>\n            <div v-if=\"instruments.length > 0\">\n              <b-table striped hover :items=\"instruments\"></b-table>\n            </div>\n            <div v-else>\n              <h5>La canzone non è stata suonata con degli strumenti</h5>\n            </div>\n          </b-col>\n        </b-row>\n      </b-container>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {BContainer, BRow, BCol} from \"bootstrap-vue\";\n\nconst SparqlClient = require('sparql-http-client')\nconst endpointUrl = 'http://localhost:7200/repositories/MEO'\n\nexport default {\n  name: \"Canzoni\",\n\n  components: {\n    //BButton,\n    BContainer, BRow, BCol\n  },\n\n  data: function () {\n    return {\n      eventSelected: null,\n      allEvents: [],\n      artistsLoaded: false,\n      allLoaded: false,\n      events: [],\n      instruments: [],\n      status: 'not_selected',\n    }\n  },\n\n  async mounted() {\n\n    const query = `\n      PREFIX meo: <http://www.modsem.org/musicalEventsOntology#>\n      PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n      PREFIX owl: <http://www.w3.org/2002/07/owl#>\n      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n\n      select ?titoloCanzone\n      where {\n          ?canzone rdf:type meo:Canzone;\n                  meo:titoloCanzone ?titoloCanzone.\n      } limit 100\n    `;\n\n    const client = new SparqlClient({endpointUrl})\n    const stream = await client.query.select(query)\n\n    var self = this;\n\n    stream.on('data', row => {\n      console.log(row);\n      Object.entries(row).forEach(([key, value]) => {\n\n        var artistName = value.value.replace('http://www.modsem.org/musicalEventsOntology#', '');\n\n        self.allEvents.push({value: artistName, text: artistName});\n\n        console.log(`${key}: ${value.value} (${value.termType})`)\n      })\n\n      self.artistsLoaded = true;\n    })\n\n    stream.on('error', err => {\n      console.error(err)\n    })\n  },\n\n  methods: {\n    callQueryMethods(songName) {\n      this.findInstruments(songName);\n      this.findLiveEvents(songName);\n    },\n    async findLiveEvents(songName) {\n      this.events = [];\n\n      var query = \"\";\n\n      //Tutti gli eventi in cui una canzone è in scaletta\n        query = `\n          PREFIX meo: <http://www.modsem.org/musicalEventsOntology#>\n          PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n          PREFIX owl: <http://www.w3.org/2002/07/owl#>\n          PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n          PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n          PREFIX owp: <http://www.ontologydesignpatterns.org/cp/owl/bag.owl#>\n\n\n          select ?nomeEvento\n          where {\n              ?evento  rdf:type meo:EventoMusicale;\n                       meo:nomeEventoMusicale ?nomeEvento;\n                       meo:haScaletta ?scaletta.\n              ?scaletta rdf:type meo:Scaletta;\n                        owp:hasItem ?brano.\n              ?brano rdf:type meo:BranoMusicale;\n                     meo:contieneCanzone ?canzone.\n              ?canzone rdf:type meo:Canzone;\n                       meo:titoloCanzone ?titoloCanzone.\n              FILTER regex(?titoloCanzone, \"` + songName + `\").\n          } limit 100`;\n\n      //Costruisco la query\n\n      //Chiamo il metodo che esegue la query: situato nel component principale\n      this.events = await this.$root.$refs.HelloWorld.makeQuery(query);\n      console.log(this.events);\n    },\n    async findInstruments(songName) {\n      this.instruments = [];\n\n      var query = \"\";\n\n      //Tutti gli eventi in cui una canzone è in scaletta\n      query = `\n        PREFIX meo: <http://www.modsem.org/musicalEventsOntology#>\n        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n        PREFIX owl: <http://www.w3.org/2002/07/owl#>\n        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n        PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\n        PREFIX owp: <http://www.ontologydesignpatterns.org/cp/owl/bag.owl#>\n\n        select distinct ?canzone ?strumento ?nomeArtista\n        where {\n            ?canzone rdf:type meo:Canzone;\n                     meo:titoloCanzone ?titoloCanzone;\n                meo:canzoneSuonataConStrumento ?strumento.\n            ?strumento rdf:type meo:StrumentoMusicale;\n                    meo:èSuonatoDa ?artista.\n            ?artista meo:nomeAgenteMusicale ?nomeArtista.\n            FILTER regex(?titoloCanzone, \"` + songName + `\").\n        } limit 100`;\n\n      //Costruisco la query\n\n      //Chiamo il metodo che esegue la query: situato nel component principale\n      this.instruments = await this.$root.$refs.HelloWorld.makeQuery(query);\n    },\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>"]}]}